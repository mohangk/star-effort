<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>⭐ Star Effort Chart 🚀</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🚀 STAR EFFORT CHART ⭐</h1>
            <p class="subtitle">Track your amazing efforts and earn Star Dollars!</p>
            <div class="header-buttons">
                <div class="star-total" id="combined-balance-badge" style="margin-right:auto;">
                    Available Star Dollars: <span id="combined-balance-header">0</span> ⭐
                </div>
                <a href="add-task.html" class="add-task-btn">
                    🌟 Complete Mission 🌟
                </a>
                <a href="manage-missions.html" class="manage-missions-btn">
                    🚀 Mission Control 🚀
                </a>
                <a href="manage-rewards.html" class="manage-missions-btn">
                    🛰️ Astral Rewards Bay 🛰️
                </a>
                <a href="redeem.html" class="manage-missions-btn">
                    🧰 Open Cargo Bay
                </a>
            </div>
        </header>

        <main class="main-content">
            <!-- ASHA's Task List -->
            <section class="child-section">
                <div class="child-header">
                    <h2>👩‍🚀 ASHA's Space Missions</h2>
                    <div class="star-total">
                        Total Star Dollars: <span id="asha-total">0</span> ⭐
                    </div>
                </div>
                <div class="task-list">
                    <!-- Loading state -->
                    <div id="asha-loading" class="loading-state">
                        <div class="loading-spinner"></div>
                        <p>🚀 Loading space missions...</p>
                    </div>
                    
                    <table id="asha-tasks" style="display: none;">
                        <thead>
                            <tr>
                                <th>🗓️ Date</th>
                                <th>🚀 Mission Description</th>
                                <th>⭐ Star Dollars</th>
                                <th>🚀 Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Tasks will be populated by JavaScript -->
                        </tbody>
                    </table>
                    <div id="asha-pagination" class="pagination-controls" style="display:none; margin-top:8px; gap:8px; align-items:center;">
                        <button id="asha-prev" class="btn btn-secondary" disabled>⬅️ Newer</button>
                        <span id="asha-page-info" style="opacity:0.9;"></span>
                        <button id="asha-next" class="btn btn-secondary">Older ➡️</button>
                    </div>
                    <div id="asha-no-tasks" class="no-tasks" style="display: none;">
                        🌌 No space missions completed yet! Ready to start exploring? 🛸
                    </div>
                </div>
            </section>

            <!-- EKAA's Task List -->
            <section class="child-section">
                <div class="child-header">
                    <h2>👨‍🚀 EKAA's Space Missions</h2>
                    <div class="star-total">
                        Total Star Dollars: <span id="ekaa-total">0</span> ⭐
                    </div>
                </div>
                <div class="task-list">
                    <!-- Loading state -->
                    <div id="ekaa-loading" class="loading-state">
                        <div class="loading-spinner"></div>
                        <p>🛸 Loading space missions...</p>
                    </div>
                    
                    <table id="ekaa-tasks" style="display: none;">
                        <thead>
                            <tr>
                                <th>🗓️ Date</th>
                                <th>🚀 Mission Description</th>
                                <th>⭐ Star Dollars</th>
                                <th>🚀 Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Tasks will be populated by JavaScript -->
                        </tbody>
                    </table>
                    <div id="ekaa-pagination" class="pagination-controls" style="display:none; margin-top:8px; gap:8px; align-items:center;">
                        <button id="ekaa-prev" class="btn btn-secondary" disabled>⬅️ Newer</button>
                        <span id="ekaa-page-info" style="opacity:0.9;"></span>
                        <button id="ekaa-next" class="btn btn-secondary">Older ➡️</button>
                    </div>
                    <div id="ekaa-no-tasks" class="no-tasks" style="display: none;">
                        🌌 No space missions completed yet! Ready to start exploring? 🛸
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>🌟 Keep up the great work, space explorers! 🌟</p>
        </footer>
    </div>

    <!-- Firebase SDKs -->
    <script type="module" src="firebase-setup.js"></script>
    <script src="script.js"></script>
    <script>
        // Initialize index page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🔧 DOM loaded on index page...');
            
            // Firebase should already be ready (script.js handles the firebase-ready event)
            if (window.isFirebaseReady) {
                console.log('✅ Firebase ready, loading tasks...');
                displayAllTasks();
            } else {
                console.error('❌ Firebase not ready - script.js should have handled this');
                alert('🔧 App initialization error. Please refresh the page.');
            }
        });
    </script>
</body>
</html>